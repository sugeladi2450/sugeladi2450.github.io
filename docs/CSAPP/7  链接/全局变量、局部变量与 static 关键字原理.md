## 一、全局变量与局部变量核心特性
### 1.1 局部变量（Local Variables）
- **定义位置**：函数内部或代码块（`{ ... }`）内部。
- **存储位置**：栈（Stack）。
- **生存期**：临时生命周期。变量在代码执行至定义语句时创建，退出所属代码块作用域后立即销毁，对应内存空间释放。
- **作用域**：代码块作用域，仅在定义该变量的代码块内部可访问。
- **初始化规则**：无默认初始化操作，变量初始值为内存随机值（垃圾值），需手动赋值。

### 1.2 全局变量（Global Variables）
- **定义位置**：所有函数外部。
- **存储位置**：已初始化全局变量存放于数据段（.data），未初始化全局变量存放于 BSS 段（.bss）。
- **生存期**：静态生命周期。程序启动时创建，程序终止时销毁，全程占用内存。
- **作用域**：默认具备全局可见性，通过 `extern` 声明，可被程序内所有源文件访问。
- **初始化规则**：系统自动初始化为 0（数值型）或空字符（字符型）。

### 1.3 特性对比表
| 特性         | 局部变量       | 全局变量               |
|--------------|----------------|------------------------|
| 存储位置     | 栈（Stack）| 数据段（.data）/ BSS段（.bss） |
| 生命周期     | 函数/代码块执行期间 | 程序整个运行周期       |
| 访问范围     | 仅当前函数/代码块 | 全程序文件（配合extern） |
| 默认初始值   | 随机内存值     | 0                      |

## 二、static 关键字作用机制
`static` 是C语言中语义随使用场景变化的关键字，核心作用为**修改符号链接属性**与**修改变量存储生存期**，是链接、存储类相关的核心知识点。

### 2.1 修饰全局变量/函数：限定链接可见性
`static` 用于全局变量或函数时，作用为**限制符号作用域为当前文件**，改变符号的链接属性。
- **无 static 修饰**：全局变量/函数为全局符号（GLOBAL），具备外部链接属性，可通过 `extern` 被其他源文件引用。
- **有 static 修饰**：全局变量/函数为文件局部符号（LOCAL），具备内部链接属性，仅当前源文件可访问，其他源文件可定义同名符号且互不冲突。

**链接器视角**：`static` 修饰的全局符号，在符号表中标记为 `LOCAL`，重定位阶段不会暴露给其他模块，避免多文件符号冲突。

### 2.2 修饰局部变量：延长存储生存期
`static` 用于函数内局部变量时，作用为**修改变量存储位置与生存期**，作用域保持不变。
- **普通局部变量**：存储于栈，函数调用时创建，调用结束后销毁，无记忆性。
- **static 局部变量**：
  1. 存储位置：从栈迁移至数据段（.data）/ BSS段（.bss）；
  2. 生存期：变为静态生命周期，仅在程序首次执行到定义语句时初始化一次，函数退出后变量保留原值，不销毁；
  3. 作用域：仍为函数内部作用域，外部无法访问。

### 2.3 代码示例
```c
#include <stdio.h>

// 统计函数调用次数
void count_calls() {
    // static局部变量，仅初始化一次
    static int counter = 0;
    counter++;
    printf("函数被调用 %d 次\n", counter);
}

int main() {
    count_calls(); // 输出：函数被调用 1 次
    count_calls(); // 输出：函数被调用 2 次
    count_calls(); // 输出：函数被调用 3 次
    return 0;
}
```

### 2.4 static 关键字作用总结表
| 修饰位置         | 核心作用                  | 链接/存储属性       |
|------------------|---------------------------|--------------------|
| 函数外部（全局） | 限制作用域为当前文件      | 内部链接           |
| 函数内部（局部） | 延长生存期至程序全程      | 静态存储期         |

### 2.5 记忆方法
- 修饰全局符号：实现**私有化**，避免跨文件符号冲突；
- 修饰局部变量：实现**持久化**，保留变量历史值。